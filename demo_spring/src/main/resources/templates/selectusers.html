<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ch·ªçn Ng∆∞·ªùi D√πng</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
<div class="container py-5">
  <h2 class="text-center">Ch·ªçn Ng∆∞·ªùi D√πng ƒë·ªÉ Th√™m v√†o C√¥ng Ty: <span th:text="${company.companyName}"></span></h2>

  <!-- N√∫t quay l·∫°i -->
  <div class="mb-3">
    <a th:href="@{'/companyUsers?companyId=' + ${company.id}}" class="btn btn-secondary">üîô Quay l·∫°i</a>
  </div>

  <!-- Ki·ªÉm tra n·∫øu kh√¥ng c√≥ User kh·∫£ d·ª•ng -->
  <div th:if="${users.isEmpty()}" class="alert alert-warning text-center">
    <p>‚ö† Kh√¥ng c√≥ ng∆∞·ªùi d√πng n√†o ch∆∞a thu·ªôc c√¥ng ty.</p>
  </div>

  <!-- Form th√™m User v√†o C√¥ng Ty -->
  <form th:if="${!users.isEmpty()}" action="/addUsersToCompany" method="post">
    <input type="hidden" name="companyId" th:value="${company.id}">

    <table class="table table-bordered table-striped">
      <thead class="table-primary">
      <tr>
        <th>
          <input type="checkbox" id="selectAll" onclick="toggleAllCheckboxes()"> Ch·ªçn
        </th>
        <th>ID</th>
        <th>T√™n</th>
        <th>Email</th>
      </tr>
      </thead>
      <tbody>
      <tr th:each="user : ${users}">
        <td><input type="checkbox" name="userIds" th:value="${user.id}"></td>
        <td th:text="${user.id}"></td>
        <td th:text="${user.name}"></td>
        <td th:text="${user.email}"></td>
      </tr>
      </tbody>
    </table>

    <button type="submit" class="btn btn-primary">‚ûï Th√™m Ng∆∞·ªùi D√πng</button>
  </form>
</div>

<script>
  function toggleAllCheckboxes() {
    let checkboxes = document.getElementsByName("userIds");
    let selectAll = document.getElementById("selectAll").checked;
    checkboxes.forEach(checkbox => {
      checkbox.checked = selectAll;
    });
  }
</script>

</body>
</html>
